{% extends 'base.html.twig' %}

{% block body %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <h3>Ripio</h3>
            <table class="table table-striped table-sm thead-dark">
            <thead>
                <tr>
                <th scope="col">Asset</th>
                <th scope="col" class="text-right">USD</th>
                <th scope="col" class="text-right">ARS</th>
                <th scope="col" class="text-right">Gap</th>
                <th scope="col" class="text-right">ARS<br /><span class="small text-muted">(incl. taker fee)</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td>Venta BTC</td>
                <td class="text-right">{{ (analizador.RipioSellBtc / analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ analizador.RipioSellBtc|number_format }}</td>
                <td class="text-right">{{ (analizador.RipioSellGapBtc * 100)|number_format(1) }}%
                    {% if analizador.RipioSellGapBtc > 0.09 %}<i class="fa fa-money-bill-wave text-success" title="Deberías tener esta punta"></i>
                    {% elseif analizador.RipioSellGapBtc < 0.05 %}<i class="fa fa-fire text-danger" title="¡Muy barato!"></i>
                    {% elseif analizador.RipioSellGapBtc < 0.08 %}<i class="fa fa-eye text-warning" title="Buen precio para comprar"></i>
                    {% endif %}
                    </td>
                <td class="text-right">{{ (analizador.RipioSellBtc * 1.005)|number_format }}</td>
                </tr>
                <tr>
                <td>Compra BTC</td>
                <td class="text-right">{{ (analizador.RipioBuyBtc / analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ analizador.RipioBuyBtc|number_format }}</td>
                <td class="text-right">{{ (analizador.RipioBuyGapBtc * 100)|number_format(1) }}%
                    {% if analizador.RipioBuyGapBtc < 0.06 %}<i class="fa fa-money-bill-wave text-success" title="Deberías tener esta punta"></i>
                    {% elseif analizador.RipioBuyGapBtc > 0.13 %}<i class="fa fa-fire text-danger" title="¡Vendan!"></i>
                    {% elseif analizador.RipioBuyGapBtc > 0.10 %}<i class="fa fa-eye text-warning" title="Buen precio para vender"></i>
                    {% endif %}
                </td>
                <td class="text-right">{{ (analizador.RipioBuyBtc * 1.005)|number_format }}</td>
                </tr>

                <tr>
                <td>Venta ETH</td>
                <td class="text-right">{{ (analizador.RipioSellEth / analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ analizador.RipioSellEth|number_format }}</td>
                <td class="text-right">{{ (analizador.RipioSellGapEth * 100)|number_format(1) }}%
                    {% if analizador.RipioSellGapEth > 0.09 %}<i class="fa fa-money-bill-wave text-success" title="Deberías tener esta punta"></i>
                    {% elseif analizador.RipioSellGapEth < 0.05 %}<i class="fa fa-fire text-danger" title="¡Muy barato!"></i>
                    {% elseif analizador.RipioSellGapEth < 0.08 %}<i class="fa fa-eye text-warning" title="Buen precio para comprar"></i>
                    {% endif %}
                </td>
                <td class="text-right">{{ (analizador.RipioSellEth * 1.005)|number_format }}</td>
                </tr>
                <tr>
                <td>Compra ETH</td>
                <td class="text-right">{{ (analizador.RipioBuyEth / analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ analizador.RipioBuyEth|number_format }}</td>
                <td class="text-right">{{ (analizador.RipioBuyGapEth * 100)|number_format(1) }}%
                    {% if analizador.RipioBuyGapEth < 0.06 %}<i class="fa fa-money-bill-wave text-success" title="Deberías tener esta punta"></i>
                    {% elseif analizador.RipioBuyGapEth > 0.13 %}<i class="fa fa-fire text-danger" title="¡Vendan!"></i>
                    {% elseif analizador.RipioBuyGapEth > 0.10 %}<i class="fa fa-eye text-warning" title="Buen precio para vender"></i>
                    {% endif %}
                </td>
                <td class="text-right">{{ (analizador.RipioBuyEth * 1.005)|number_format }}</td>
                </tr>
            </tbody>
            </table>
            Gap BTC {{ (analizador.GapBtc * 100)|number_format(1) }}%, ETH {{ (analizador.GapEth * 100)|number_format(1) }}%
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
            <h3>Reference</h3>
            <table class="table table-striped table-sm thead-dark">
            <thead>
                <tr>
                <th scope="col">Asset</th>
                <th scope="col" class="text-right">USD</th>
                <th scope="col" class="text-right">ARS</th>
                <th scope="col" class="text-right">ARS<br /><span class="small text-muted">(fees incl.)</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td>BTC</td>
                <td class="text-right">{{ analizador.ReferenceBtcUsd|number_format }}</td>
                <td class="text-right">{{ (analizador.ReferenceBtcUsd * analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ (analizador.ReferenceBtcUsd * analizador.Dolar * 1.04075)|number_format }}</td>
                </tr>
                <tr>
                <td>ETH</td>
                <td class="text-right">{{ analizador.ReferenceEthUsd|number_format }}</td>
                <td class="text-right">{{ (analizador.ReferenceEthUsd * analizador.Dolar)|number_format }}</td>
                <td class="text-right">{{ (analizador.ReferenceEthUsd * analizador.Dolar * 1.03075)|number_format }}</td>
                </tr>
                <tr>
                <td>USD</td>
                <td class="text-right"> </td>
                <td class="text-right">{{ analizador.Dolar }}</td>
                <td class="text-right"></td>
                </tr>
            </tbody>
            </table>
            ETH/BTC: {{ analizador.ReferenceEthBtc|number_format(6) }}
        </div>
    </div>

    <hr />

    <h2>Arbitrajes</h2>

    <p>BTC <i class="fa fa-arrow-right text-muted"></i> ARS <i class="fa fa-arrow-right text-muted"></i> ETH <i class="fa fa-arrow-right text-muted"></i> BTC: 
        <span class="{% if analizador.calcularGapArbitrageBtcEth > 0.015 %}text-danger
        {% elseif analizador.calcularGapArbitrageBtcEth > 0.01 %}text-warning
        {% endif %}">{{ (analizador.calcularGapArbitrageBtcEth * 100)|number_format(2) }}%</span>.

        {% if analizador.calcularGapArbitrageBtcEth < 0.015 %}
            Punto mínimo de arbitraje (1.5%):
            Venta BTC a {{ (analizador.RipioBuyBtc * (1.015 - analizador.calcularGapArbitrageBtcEth))|number_format }}
            o compra ETH a {{ (analizador.RipioSellEth * (0.985 + analizador.calcularGapArbitrageBtcEth))|number_format }}.
        {% endif %}
    </p>

    <p>ETH <i class="fa fa-arrow-right text-muted"></i> ARS <i class="fa fa-arrow-right text-muted"></i> BTC <i class="fa fa-arrow-right text-muted"></i> ETH:
        <span class="{% if analizador.calcularGapArbitrageEthBtc > 0.015 %}text-danger
        {% elseif analizador.calcularGapArbitrageEthBtc > 0.01 %}text-warning
        {% endif %}">{{ (analizador.calcularGapArbitrageEthBtc * 100)|number_format(2) }}%</span>.

        {% if analizador.calcularGapArbitrageEthBtc < 0.015 %}
            Punto mínimo de arbitraje (1.5%):
            Venta ETH a {{ (analizador.RipioBuyEth * (1.015 - analizador.calcularGapArbitrageEthBtc))|number_format }}
            o compra BTC a {{ (analizador.RipioSellBtc * (0.985 + analizador.calcularGapArbitrageEthBtc))|number_format }}.
        {% endif %}
    </p>
    
</div>
{% endblock body %}

{% block javascripts %}
<script>
setTimeout(function(){
   window.location.reload(1);
}, 30000);
</script>
{% endblock javascripts %}